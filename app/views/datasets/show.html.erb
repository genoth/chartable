<h1>Data Visualization</h1>

<%= form_tag "query", id: "vis-form", method: "POST", url: "/datasets/#{params[:id]}/query" do |form| %>
  See <select name="aggregations">
    <% (@diagram_form_inputs[:pie][:aggregations]).each do |aggregation| %>
     <option value="<%= aggregation %>"><%=aggregation%></option>
    <% end %>
  </select>
  by
  <select name="descriptors"> <!--Supplement an id here instead of using 'name'-->
    <% (@diagram_form_inputs[:pie][:descriptors]).each do |descriptor| %>
     <option value="<%=descriptor%>"><%=descriptor%></option>
    <% end %>
  </select>
  as
  <select name="chart"> <!--Supplement an id here instead of using 'name'-->
    <%= @diagram_types.each do |key, value| %>
     <option value="<%= key %>"><%= value %></option>
     <% end %>
  </select>

  <select id="order" name="order">
    <option value="All">All</option>
    <option id="top" value="top">Top</option>
    <option id="bottom" value="bottom">Bottom</option>
  </select>

  <select id="limit" name="limit" class="hidden">
    <option value="20">20</option>
    <option value="10">10</option>
    <option value="5">5</option>
  </select>
  <p>
  <input type="submit" value="Visualize!">
  </p>
<% end %>

  <div id="our-data">
  </div>

  <div id="diagram-title"></div>
  <div id="chart"></div>
  <div id="download-div" class="hidden">
    <%= form_tag "download", id: "download-form", method: "POST", url: "/datasets/download" do |form| %>
    <input type="submit" value="Download">
    <% end %>
  </div>
  <br>
  <br>
  <div id="descriptive-metadata">
    <p id="dataset-title"><%= @descriptive_metadata[:dataset_title] %></p>
    <p id="dataset-description"><%= @descriptive_metadata[:description] %></p>
  </div>
  <div id="administrative-metadata">
    <p>Source: <a href="<%= @descriptive_metadata[:dataset_url] %>"><%= @descriptive_metadata[:dataset_source] %></a></p>
  </div>








